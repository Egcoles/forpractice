
QUOTATION TABLE
-Control No
- Project Name
- Client Name
-Company
- Location
-Status
-Entry Date
- Action 
=EDIT
=PRINT

QUOTATION CREATE
-clientName
-PrjectName
-companyName - need db 
-location
-CompanyAddress
-Terms
-VAT = 1.12
-discount
-submittedBy
-approver
-endorser

ITEM
-item
-qty
-unitCost
-markupPercentage
-overallTotal
-GrandTotal - if with vat 
the amount is different from overallTotal

----------------------------------------------------
FUNCTIONALITY
+Select Company
=render list of location for that company
+select location
=automaticaly fill in the company address

+Select Item
= automatically fill in the item desc
= also unit is automically fill in
+Item desc is editable

*VALIDATIONS ON INPUTS*
+Input Quantity
= allow only greather than 0 
+On submit do not allow QTY == 0

+Input UnitCost 
= allow only positive numbers

+Input Markup
= allow only whole numbers
= greather than 0
+ on submit do not allow 0

+Item already selected on that row 
= if item already selected previous row 
return = 'This item already added. Please review your input '
+Total Cost is read only

**COMPUTATIONS**
PerRowComputation
Total cost = qty * unitcost
Over all total = qty * unitcost
grand total = qty * unitcost
if has markup {
  new total cost = total cost * markup%  
  new over all total = over all total * markup% 
  new grand total = grand total * markup% 
}
if has discount {
  new over all total = over all total - discount% 
  new grand total = grand total - discount%
}
if has VAT {
  new grand total = grand total * 1.12 vat
}

OverAllComputation
overall total = perRowtotalcost ++
grandtotal = perRowtotalcost ++


pag kuha ng discount ay
qty * unit cost = total cost
total cost * discount = less 
total - less = new total cost

pag kuha ng markup ay
qty * unit cost = total cost
total * cost + markup = increase price
total cost + increase price = new total cost




-------------------------------------------------
-REPORT VIEW
-DATE REQUIRED
- PR NO
-DATE NEEDED
- PROJECT DESCRIPTION
-ITEM NO
- ITEM DESCRIPTION
- QTY
- UNIT
_ SUPPLIER
-PRICE
-TOTAL
-createdby
-CAnvassed by
-Endorser
-Approver


paanu to gagawan ng model using dapper
sympre ang view nito sa fronend ay ganto
PR NUMBER - isang valuenlng naka display 
PR_ProcjectDesc - is dn
Created by 
Canvassed by:
Endorser: 
Approver:

ITEMS ay naka populate sa table ng ganto
item id | Item Desc | Qty |Unit |Supplier ---

price bawat item and total of price bawat supplier
===============================================
MODEL
PRID
PRGRID_ID
PRNUMBEER
PROJECTDESC
ITEMID
ITEMDESC
QTY
UNIT
SUPPLIERNAME
PRICE
TOTAL
ENDROSER_NAME
APPROVER_NAME
CREATEDBY_NAME
CANVASSEDSBY_NAME
 
============================================
1.Preview slider for pdf viewer
2. Multiple Supplier selection
3. If Change access how does it need reload


Preview data: 
date
prno.
project description
item 
description,
qty,
unit,
suplier
price
total
+===========================================+
TODO:: ADD Button to Add Supplier
-table will be responsive : have a horizontal scroll

DECLARE @PRId INT = 35;

;WITH UniqueSuppliers AS (
    SELECT 
        a.PR_ID,
        a.PR_REFERENCENO,
        a.PR_PROJECTDESC,
        b.ITEMID,
        b.ITEM_DESCRIPTION,
        b.QTY,
        c.SupplierID,
        c.Price,
        c.Total,
        ROW_NUMBER() OVER(PARTITION BY a.PR_ID, b.ITEMID ORDER BY c.Price) as RowNum
    FROM 
        [PRO_USER].[dbo].[PURCHASE_REQUISITION] a
    LEFT JOIN 
        [PRO_USER].[dbo].[PR_GRID] b ON a.PR_ID = b.PRID
    LEFT JOIN 
        [PRO_USER].[dbo].[PR_SUPPLIERS] c ON b.PRGRID_Id = c.PRGRID_Id
    WHERE 
        a.PR_ID = @PRId 
        AND c.SupplierID IS NOT NULL
)
SELECT 
    PR_ID,
    PR_REFERENCENO,
    PR_PROJECTDESC,
    ITEMID,
    ITEM_DESCRIPTION,
    QTY,
    SupplierID,
    Price,
    Total
FROM 
    UniqueSuppliers
WHERE 
    RowNum = 1  -- Selects first occurrence, effectively removing duplicates
ORDER BY 
    PR_ID DESC; 
